{"ast":null,"code":"import _regeneratorRuntime from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import{fetchPosts}from'../../actions';import dateTrimmer from'../../atoms/dateTrim';import ScrollUpdater from'../../atoms/ScrollUpdater';import InfiniteScroll from'react-infinite-scroller';var PostList=/*#__PURE__*/function(_React$Component){_inherits(PostList,_React$Component);function PostList(props){var _this;_classCallCheck(this,PostList);_this=_possibleConstructorReturn(this,_getPrototypeOf(PostList).call(this,props));_this.renderPost=function(post){if(post===undefined)return;if(post==={})return;var _post=_objectSpread({},post),id=_post.id,headers=_post.headers,content=_post.content;var _headers=_objectSpread({},headers),title=_headers.title,author=_headers.author,image=_headers.image,published=_headers.published,data=_headers.data;var _image=\"https://\".concat(image.slice(7));var date=new dateTrimmer(data.created);return React.createElement(\"div\",{className:\"post-content\",key:post.id},React.createElement(\"div\",{className:\"post-card\"},React.createElement(Link,{to:\"/posts/\".concat(post.id)},React.createElement(\"div\",{className:\"card-dot\"}),React.createElement(\"div\",{className:\"card-image\"},React.createElement(\"img\",{src:_image,height:\"160\",width:\"320\"})),React.createElement(\"div\",{className:\"post-published\"},date.postDate()),React.createElement(\"div\",{className:\"post-author\"},author),React.createElement(\"div\",{className:\"post-title\"},title),React.createElement(\"div\",{className:\"post-Intro\"},content))));};_this.postsLoader=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var endPostFlag,start,end,posts,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.fetchPosts(page-1);case 2:endPostFlag=_context.sent;if(endPostFlag===false){_this.setState(function(state){return{hasMoreItems:false};});}// Starting point of page is 1, So we need to set it as 0\nstart=(page-1)*5;end=page*5;posts=[];for(i=start;i<end;i++){posts.push(_this.renderPost(_this.props.posts[i]));}_this.setState(function(state){return{prettyPosts:_this.state.prettyPosts.concat(posts)};});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={hasMoreItems:true,prettyPosts:[]};return _this;}_createClass(PostList,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"infinite-scroll\"},React.createElement(InfiniteScroll,{pageStart:0,loadMore:this.postsLoader,hasMore:this.state.hasMoreItems,loader:React.createElement(\"div\",{className:\"loader\",key:0},\"Loading ...\")},this.state.prettyPosts));}}]);return PostList;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{posts:state.posts,currentId:state.auth.userId,isSignedIn:state.auth.isSignedIn};};export default connect(mapStateToProps,{fetchPosts:fetchPosts})(PostList);","map":{"version":3,"sources":["/home/ec2-user/DUMDEV/mywebsite/src/components/pages/PostsPage.js"],"names":["React","connect","Link","fetchPosts","dateTrimmer","ScrollUpdater","InfiniteScroll","PostList","props","renderPost","post","undefined","id","headers","content","title","author","image","published","data","_image","slice","date","created","postDate","postsLoader","page","endPostFlag","setState","state","hasMoreItems","start","end","posts","i","push","prettyPosts","concat","Component","mapStateToProps","currentId","auth","userId","isSignedIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { fetchPosts } from '../../actions';\nimport dateTrimmer from '../../atoms/dateTrim';\nimport ScrollUpdater   from '../../atoms/ScrollUpdater';\nimport InfiniteScroll from 'react-infinite-scroller';\n\nclass PostList extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\t\thasMoreItems:true,\n\t\t\t\tprettyPosts:[]\n\t\t}\n\t}\n\n\trenderPost = (post) => {\n\t\tif( post === undefined) return;\n\t\tif( post === {} ) return ;\n\t\tconst {id , headers, content } = { ...post };\n\t \tconst { title, author, image, published, data } = { ... headers};\n\t\t\t\n\t\tconst _image = `https://${image.slice(7)}`;\n\t\tconst date = new dateTrimmer(data.created);\n\t\treturn (\n\t\t\t\t<div className=\"post-content\" key={ post.id }>\n\t\t\t\t\t<div className=\"post-card\">\n\t\t\t\t\t\t<Link to={`/posts/${ post.id }`}>\n\t\t\t\t\t\t<div className=\"card-dot\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"card-image\">\n\t\t\t\t\t\t\t\t<img src={ _image } height=\"160\" width=\"320\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"post-published\">\n\t\t\t\t\t\t\t{ date.postDate() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"post-author\">\n\t\t\t\t\t\t\t{ author }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"post-title\">\n\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"post-Intro\">\n\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t);\n\t}\n\t\n\tpostsLoader = async (page) => {\n\t\t// controll end of Infinty scroll\t\n\t\tconst endPostFlag = await this.props.fetchPosts(page-1);\n\t\tif ( endPostFlag === false  ){ \n\t\t\tthis.setState( (state) => {return {hasMoreItems: false }})\n\t\t}\t\t\n\t\t// Starting point of page is 1, So we need to set it as 0\n\t\tconst start = (page-1)*5;\n\t\tconst end = (page)*5;\n\t\tconst posts = [];\n\t\tfor ( let i=start ; i<end ; i++){\n\t\t\tposts.push(this.renderPost(this.props.posts[i]));\n\t\t}\n\t\tthis.setState(state => {\n\t\t\treturn { prettyPosts: this.state.prettyPosts.concat(posts)};\n\t\t});\n\t}\n\t\n\trender(){\n\t\t\treturn (<div className=\"infinite-scroll\">\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t    pageStart={0}\n\t\t\t\t\t\tloadMore={this.postsLoader}\n\t\t\t\t\t    hasMore={this.state.hasMoreItems}\n\t\t\t\t\t    loader={<div className=\"loader\" key={0}>Loading ...</div>}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.state.prettyPosts}\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t\t</div>\n\t\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\t\treturn {\n\t\t\tposts: state.posts,\n\t\t\tcurrentId: state.auth.userId,\n\t\t\tisSignedIn: state.auth.isSignedIn\n\t};\n}\n\nexport default connect(mapStateToProps,{ fetchPosts })(PostList);\n"]},"metadata":{},"sourceType":"module"}