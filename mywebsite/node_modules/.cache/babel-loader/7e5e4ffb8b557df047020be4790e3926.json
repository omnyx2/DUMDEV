{"ast":null,"code":"import _classCallCheck from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import{signIn,signOut}from'../../actions';var GoogleAuth=/*#__PURE__*/function(_React$Component){_inherits(GoogleAuth,_React$Component);function GoogleAuth(){var _getPrototypeOf2;var _this;_classCallCheck(this,GoogleAuth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(GoogleAuth)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onAuthChange=function(isSignedIn){if(isSignedIn){_this.props.signIn(_this.auth.currentUser.get().getId());}else{_this.props.signOut();}};_this.onSignOutClick=function(){_this.auth.signOut();};_this.onSignInClick=function(){_this.auth.signIn();};return _this;}_createClass(GoogleAuth,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.gapi.load('client:auth2',function(){window.gapi.client.init({//\tclientId:'771971444403-a6nuckms0jqen13s8bjt9gcgolt6ivbd.apps.googleusercontent.com',\nclientId:'771971444403-a6nuckms0jqen13s8bjt9gcgolt6ivbd.apps.googleusercontent.com',scope:'email'}).then(function(){_this2.auth=window.gapi.auth2.getAuthInstance();_this2.onAuthChange(_this2.auth.isSignedIn.get());_this2.auth.isSignedIn.listen(_this2.onAuthChange);});});}},{key:\"renderAuthButton\",value:function renderAuthButton(){if(this.props.isSignedIn===null){return null;}else if(this.props.isSignedIn){return React.createElement(\"button\",{onClick:this.onSignOutClick,className:\"ui red google button\"},React.createElement(\"i\",{className:\"google icon\"}),\"Sign Out\");}else{return React.createElement(\"button\",{onClick:this.onSignInClick,className:\"ui red google button\"},React.createElement(\"i\",{className:\"google icon\"}),\"Sign In with Google\");}}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,this.renderAuthButton());}}]);return GoogleAuth;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{isSignedIn:state.auth.isSignedIn};};export default connect(mapStateToProps,{signIn:signIn,signOut:signOut})(GoogleAuth);","map":{"version":3,"sources":["/home/ec2-user/DUMDEV/mywebsite/src/components/logins/GoogleAuth.js"],"names":["React","connect","signIn","signOut","GoogleAuth","onAuthChange","isSignedIn","props","auth","currentUser","get","getId","onSignOutClick","onSignInClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Component","mapStateToProps","state"],"mappings":"4vBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAAQC,MAAR,CAAgBC,OAAhB,KAA8B,eAA9B,C,GAEMC,CAAAA,U,2ZAkBJC,Y,CAAe,SAACC,UAAD,CAAgB,CAChC,GAAGA,UAAH,CAAc,CACb,MAAKC,KAAL,CAAWL,MAAX,CAAkB,MAAKM,IAAL,CAAUC,WAAV,CAAsBC,GAAtB,GAA4BC,KAA5B,EAAlB,EACA,CAFD,IAEK,CACJ,MAAKJ,KAAL,CAAWJ,OAAX,GACA,CACC,C,OAEDS,c,CAAiB,UAAM,CACrB,MAAKJ,IAAL,CAAUL,OAAV,GACD,C,OACDU,a,CAAgB,UAAK,CACnB,MAAKL,IAAL,CAAUN,MAAV,GACD,C,mGA7BmB,iBAClBY,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,cAAjB,CAAiC,UAAM,CACrCF,MAAM,CAACC,IAAP,CAAYE,MAAZ,CACGC,IADH,CACQ,CACJ;AACAC,QAAQ,CACN,0EAHE,CAIJC,KAAK,CAAE,OAJH,CADR,EAOGC,IAPH,CAOQ,UAAM,CACV,MAAI,CAACb,IAAL,CAAYM,MAAM,CAACC,IAAP,CAAYO,KAAZ,CAAkBC,eAAlB,EAAZ,CACH,MAAI,CAAClB,YAAL,CAAkB,MAAI,CAACG,IAAL,CAAUF,UAAV,CAAqBI,GAArB,EAAlB,EACG,MAAI,CAACF,IAAL,CAAUF,UAAV,CAAqBkB,MAArB,CAA4B,MAAI,CAACnB,YAAjC,EACD,CAXH,EAYD,CAbD,EAcD,C,2DAgBkB,CACjB,GAAI,KAAKE,KAAL,CAAWD,UAAX,GAA0B,IAA9B,CAAoC,CACtC,MAAO,KAAP,CACA,CAFE,IAEI,IAAI,KAAKC,KAAL,CAAWD,UAAf,CAA2B,CAChC,MAAO,+BAAQ,OAAO,CAAE,KAAKM,cAAtB,CAAsC,SAAS,CAAC,sBAAhD,EACL,yBAAG,SAAS,CAAC,aAAb,EADK,YAAP,CAIE,CALG,IAKG,CACR,MAAO,+BAAQ,OAAO,CAAE,KAAKC,aAAtB,CAAqC,SAAS,CAAC,sBAA/C,EACL,yBAAG,SAAS,CAAC,aAAb,EADK,uBAAP,CAIE,CACF,C,uCAEQ,CACP,MAAO,gCAAM,KAAKY,gBAAL,EAAN,CAAP,CACD,C,wBAnDsBzB,KAAK,CAAC0B,S,EAsD/B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC,MAAO,CACLtB,UAAU,CAAEsB,KAAK,CAACpB,IAAN,CAAWF,UADlB,CAAP,CAGD,CAJD,CAKA,cAAeL,CAAAA,OAAO,CAAC0B,eAAD,CAAkB,CAACzB,MAAM,CAANA,MAAD,CAASC,OAAO,CAAPA,OAAT,CAAlB,CAAP,CAA4CC,UAA5C,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport {signIn, signOut} from '../../actions';\n\nclass GoogleAuth extends React.Component {\n\n  componentDidMount() {\n    window.gapi.load('client:auth2', () => {\n      window.gapi.client\n        .init({\n          //\tclientId:'771971444403-a6nuckms0jqen13s8bjt9gcgolt6ivbd.apps.googleusercontent.com',\n          clientId:\n            '771971444403-a6nuckms0jqen13s8bjt9gcgolt6ivbd.apps.googleusercontent.com',\n          scope: 'email',\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n\t      this.onAuthChange(this.auth.isSignedIn.get());\n          this.auth.isSignedIn.listen(this.onAuthChange);\n        });\n    });\n  } \n  onAuthChange = (isSignedIn) => {\n\tif(isSignedIn){\n\t\tthis.props.signIn(this.auth.currentUser.get().getId());\n\t}else{\n\t\tthis.props.signOut();\n\t}\n  }\n\n  onSignOutClick = () => {\n    this.auth.signOut();\n  }\n  onSignInClick = () =>{\n    this.auth.signIn();\n  }\n\n  renderAuthButton() {\n    if (this.props.isSignedIn === null) {\n\t\treturn null;\n\t} else if (this.props.isSignedIn) {\n\t\t\treturn <button onClick={this.onSignOutClick} className=\"ui red google button\">\n\t\t\t\t\t<i className=\"google icon\"/>\n\t\t\t\t\tSign Out\n\t\t\t\t\t</button>\n    } else {\n\t\t\treturn <button onClick={this.onSignInClick} className=\"ui red google button\">\n\t\t\t\t\t<i className=\"google icon\"/>\n\t\t\t\t\tSign In with Google\n\t\t\t\t\t</button>\n    }\n  }\n\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n\t\treturn { \n\t\t\t\tisSignedIn: state.auth.isSignedIn\n\t\t};\n}\nexport default connect(mapStateToProps, {signIn, signOut})(GoogleAuth);\n"]},"metadata":{},"sourceType":"module"}