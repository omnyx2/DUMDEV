{"ast":null,"code":"import _defineProperty from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/ec2-user/DUMDEV/mywebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import{connect}from'react-redux';import InfiniteScroll from'react-infinite-scroller';import{fetchBooks}from'../../actions';var BookList=/*#__PURE__*/function(_React$Component){_inherits(BookList,_React$Component);function BookList(props){var _this;_classCallCheck(this,BookList);_this=_possibleConstructorReturn(this,_getPrototypeOf(BookList).call(this,props));_this.booksLoader=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var endflag,start,end,books,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.fetchBooks(page-1);case 2:endflag=_context.sent;start=(page-1)*5;end=page*5;books=[];if(endflag===false){_this.setState(function(state){return{hasMoreItems:false};});}for(i=start;i<end;i++){books.push(_this.renderBook(_this.props.books[i]));}_this.setState(function(state){return{prettyBooks:_this.state.prettyBooks.concat(books)};});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={hasMoreItems:true,prettyBooks:[]};return _this;}_createClass(BookList,[{key:\"renderBook\",value:function renderBook(book){var _book=_objectSpread({},book),author=_book.author,title=_book.title,date=_book.date,post=_book.post;if(book==={})return;if(book===undefined)return;return React.createElement(\"div\",{className:\"book-content\"},React.createElement(\"div\",{className:\"book-card\"},React.createElement(\"div\",{className:\"book-title\"},author),React.createElement(\"div\",{className:\"book-author\"},title),React.createElement(\"div\",{className:\"book-Intro\"},\"IntroIntroIntro\"),React.createElement(\"div\",{className:\"book-date\"},date)));}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"infinity-scroll\"},React.createElement(InfiniteScroll,{pageStart:0,loadMore:this.booksLoader,hasMore:this.state.hasMoreItems,loader:React.createElement(\"div\",{className:\"loader\",key:0},\"Loading...\")},this.state.prettyBooks));}}]);return BookList;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{books:state.books,currentId:state.auth.userId,isSignedIn:state.auth.IsSignedIn};};export default connect(mapStateToProps,{fetchBooks:fetchBooks})(BookList);","map":{"version":3,"sources":["/home/ec2-user/DUMDEV/mywebsite/src/components/pages/BooksPage.js"],"names":["React","connect","InfiniteScroll","fetchBooks","BookList","props","booksLoader","page","endflag","start","end","books","setState","state","hasMoreItems","i","push","renderBook","prettyBooks","concat","book","author","title","date","post","undefined","Component","mapStateToProps","currentId","auth","userId","isSignedIn","IsSignedIn"],"mappings":"y8DAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,cAAP,KAA2B,yBAA3B,CACA,OAASC,UAAT,KAA2B,eAA3B,C,GAEMC,CAAAA,Q,8EACL,kBAAYC,KAAZ,CAAkB,0CACjB,0EAAMA,KAAN,GADiB,MAuBlBC,WAvBkB,0FAuBJ,iBAAOC,IAAP,sKACS,OAAKF,KAAL,CAAWF,UAAX,CAAsBI,IAAI,CAAC,CAA3B,CADT,QACPC,OADO,eAEPC,KAFO,CAEC,CAACF,IAAI,CAAC,CAAN,EAAS,CAFV,CAGPG,GAHO,CAGDH,IAAI,CAAC,CAHJ,CAIPI,KAJO,CAIC,EAJD,CAKb,GAAGH,OAAO,GAAK,KAAf,CAAqB,CACpB,MAAKI,QAAL,CAAc,SAACC,KAAD,CAAW,CACxB,MAAO,CAAEC,YAAY,CAAE,KAAhB,CAAP,CACA,CAFD,EAGA,CACD,IAAUC,CAAV,CAAYN,KAAZ,CAAmBM,CAAC,CAACL,GAArB,CAA2BK,CAAC,EAA5B,CAAgC,CAC/BJ,KAAK,CAACK,IAAN,CAAW,MAAKC,UAAL,CAAgB,MAAKZ,KAAL,CAAWM,KAAX,CAAiBI,CAAjB,CAAhB,CAAX,EACA,CACD,MAAKH,QAAL,CAAc,SAACC,KAAD,CAAW,CACvB,MAAO,CAAEK,WAAW,CAAE,MAAKL,KAAL,CAAWK,WAAX,CAAuBC,MAAvB,CAA8BR,KAA9B,CAAf,CAAP,CACD,CAFD,EAba,sDAvBI,+DAEjB,MAAKE,KAAL,CAAa,CACZC,YAAY,CAAE,IADF,CAEZI,WAAW,CAAC,EAFA,CAAb,CAFiB,aAMjB,C,mEAEUE,I,CAAK,4BAC4BA,IAD5B,EACPC,MADO,OACPA,MADO,CACCC,KADD,OACCA,KADD,CACQC,IADR,OACQA,IADR,CACcC,IADd,OACcA,IADd,CAEf,GAAGJ,IAAI,GAAK,EAAZ,CAAgB,OAChB,GAAGA,IAAI,GAAKK,SAAZ,CAAwB,OACxB,MACC,4BAAK,SAAS,CAAC,cAAf,EACC,2BAAK,SAAS,CAAC,WAAf,EACC,2BAAK,SAAS,CAAC,YAAf,EAA8BJ,MAA9B,CADD,CAEC,2BAAK,SAAS,CAAC,aAAf,EAA+BC,KAA/B,CAFD,CAGC,2BAAK,SAAS,CAAC,YAAf,oBAHD,CAIC,2BAAK,SAAS,CAAC,WAAf,EAA6BC,IAA7B,CAJD,CADD,CADD,CAUA,C,uCAkBO,CACP,MACC,4BAAK,SAAS,CAAC,iBAAf,EACC,oBAAC,cAAD,EACE,SAAS,CAAE,CADb,CAEE,QAAQ,CAAE,KAAKjB,WAFjB,CAGE,OAAO,CAAE,KAAKO,KAAL,CAAWC,YAHtB,CAIE,MAAM,CAAE,2BAAK,SAAS,CAAC,QAAf,CAAwB,GAAG,CAAE,CAA7B,eAJV,EAMG,KAAKD,KAAL,CAAWK,WANd,CADD,CADD,CAWA,C,sBArDqBlB,KAAK,CAAC0B,S,EAwD7B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACd,KAAD,CAAW,CACjC,MAAO,CACNF,KAAK,CAAEE,KAAK,CAACF,KADP,CAERiB,SAAS,CAAEf,KAAK,CAACgB,IAAN,CAAWC,MAFd,CAGRC,UAAU,CAAElB,KAAK,CAACgB,IAAN,CAAWG,UAHf,CAAP,CAKD,CAND,CAQA,cAAe/B,CAAAA,OAAO,CAAC0B,eAAD,CAAkB,CAAExB,UAAU,CAAVA,UAAF,CAAlB,CAAP,CAAyCC,QAAzC,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { fetchBooks } from '../../actions';\n\nclass BookList extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thasMoreItems: true,\n\t\t\tprettyBooks:[]\n\t\t}\n\t}\n\n\trenderBook(book){\n\t\tconst { author, title, date, post } = { ...book };\t\t\n\t\tif(book === {}) return;\n\t\tif(book === undefined ) return;\n\t\treturn (\n\t\t\t<div className=\"book-content\">\n\t\t\t\t<div className=\"book-card\">\n\t\t\t\t\t<div className=\"book-title\">{ author }</div>\n\t\t\t\t\t<div className=\"book-author\">{ title }</div>\n\t\t\t\t\t<div className=\"book-Intro\">IntroIntroIntro</div>\n\t\t\t\t\t<div className=\"book-date\">{ date }</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tbooksLoader = async (page) => {\n\t\tconst endflag = await this.props.fetchBooks(page-1);\n\t\tconst start = (page-1)*5;\n\t\tconst end = page*5;\n\t\tconst books = [];\n\t\tif(endflag === false){ \n\t\t\tthis.setState((state) => {\n\t\t\t\treturn { hasMoreItems: false}\n\t\t\t});\n\t\t}\n\t\tfor ( let i=start; i<end ; i++ ){\n\t\t\tbooks.push(this.renderBook(this.props.books[i]));\n\t\t}\n\t\tthis.setState((state) => {\n\t\t\t\treturn { prettyBooks: this.state.prettyBooks.concat(books)}\n\t\t});\n\t}\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"infinity-scroll\">\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tpageStart={0}\n\t\t\t\t\t\tloadMore={this.booksLoader}\n\t\t\t\t\t\thasMore={this.state.hasMoreItems}\n\t\t\t\t\t\tloader={<div className=\"loader\" key={0}>Loading...</div>}\n\t\t\t\t>\n\t\t\t\t\t{ this.state.prettyBooks }\n\t\t\t\t</InfiniteScroll>\n\t\t</div>);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n  return {\n  \tbooks: state.books,\n\tcurrentId: state.auth.userId,\n\tisSignedIn: state.auth.IsSignedIn\n  };\n}\n\nexport default connect(mapStateToProps, { fetchBooks })(BookList); \n"]},"metadata":{},"sourceType":"module"}